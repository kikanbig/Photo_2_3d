<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - Photo to 3D</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .section {
            margin-bottom: 40px;
            border-bottom: 1px solid #eee;
            padding-bottom: 30px;
        }
        .section:last-child {
            border-bottom: none;
        }
        h2 {
            color: #555;
            margin-bottom: 20px;
            font-size: 1.4em;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        input[type="email"], input[type="password"], input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }
        button:hover {
            transform: translateY(-2px);
        }
        .response {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        .info {
            background: #e3f2fd;
        }
        .token-display {
            background: #fff3cd;
            border-left-color: #ffc107;
            margin-top: 10px;
        }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .warning strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            Photo to 3D - –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∫—Ä–µ–¥–∏—Ç–æ–≤
        </p>

        <div class="warning">
            <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API.
            –í production –±—É–¥–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å React.
        </div>

        <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
        <div class="section">
            <h2>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <p>–°–æ–∑–¥–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>

            <div class="form-group">
                <label for="register-email">Email:</label>
                <input type="email" id="register-email" placeholder="user@example.com">
            </div>

            <div class="form-group">
                <label for="register-password">–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤):</label>
                <input type="password" id="register-password" placeholder="password123">
            </div>

            <button onclick="registerUser()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <div id="register-response" class="response info"></div>
        </div>

        <!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email -->
        <div class="section">
            <h2>‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</h2>
            <p>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç email –ø–æ —Ç–æ–∫–µ–Ω—É –∏–∑ –ø–∏—Å—å–º–∞</p>

            <div class="form-group">
                <label for="verify-token">–¢–æ–∫–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–∏–∑ email):</label>
                <input type="text" id="verify-token" placeholder="token-from-email">
            </div>

            <button onclick="verifyEmail()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email</button>
            <div id="verify-response" class="response info"></div>
        </div>

        <!-- –í—Ö–æ–¥ -->
        <div class="section">
            <h2>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <p>–ü–æ–ª—É—á–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API</p>

            <div class="form-group">
                <label for="login-email">Email:</label>
                <input type="email" id="login-email" placeholder="user@example.com">
            </div>

            <div class="form-group">
                <label for="login-password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="login-password" placeholder="password123">
            </div>

            <button onclick="loginUser()">–í–æ–π—Ç–∏</button>
            <div id="login-response" class="response info"></div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div class="section">
            <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <p>–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω–∞)</p>

            <button onclick="getProfile()">–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
            <div id="profile-response" class="response info"></div>
        </div>

        <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 3D (–ø—Ä–∏–º–µ—Ä) -->
        <div class="section">
            <h2>ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 3D –º–æ–¥–µ–ª–∏</h2>
            <p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∏ –∫—Ä–µ–¥–∏—Ç–æ–≤)</p>

            <div class="code">
POST /api/generation/upload
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: multipart/form-data

file: image.jpg
            </div>

            <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> 1 –∫—Ä–µ–¥–∏—Ç</p>
            <p><strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π email, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤</p>
        </div>

        <!-- API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="section">
            <h2>üìö API –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>

            <h3>Base URL:</h3>
            <div class="code">https://photo23d-production.up.railway.app/api</div>

            <h3>–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:</h3>
            <ul>
                <li><code>POST /api/auth/register</code> - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</li>
                <li><code>POST /api/auth/verify-email</code> - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</li>
                <li><code>POST /api/auth/resend-verification</code> - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞</li>
                <li><code>POST /api/auth/login</code> - –í—Ö–æ–¥</li>
                <li><code>GET /api/auth/profile</code> - –ü—Ä–æ—Ñ–∏–ª—å (–∑–∞—â–∏—â–µ–Ω–æ)</li>
                <li><code>POST /api/generation/upload</code> - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è (–∑–∞—â–∏—â–µ–Ω–æ)</li>
                <li><code>GET /api/models</code> - –ú–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞—â–∏—â–µ–Ω–æ)</li>
            </ul>
        </div>
    </div>

    <script>
        const API_BASE = 'https://photo23d-production.up.railway.app/api';
        let jwtToken = localStorage.getItem('jwt_token');

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–∫–µ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            if (jwtToken) {
                document.getElementById('profile-response').innerHTML = '‚úÖ –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω –≤ localStorage';
            }
        };

        async function makeRequest(endpoint, method = 'POST', data = null, auth = false) {
            const url = `${API_BASE}${endpoint}`;
            const headers = {
                'Content-Type': 'application/json'
            };

            if (auth && jwtToken) {
                headers['Authorization'] = `Bearer ${jwtToken}`;
            }

            const config = {
                method,
                headers
            };

            if (data && method !== 'GET') {
                config.body = JSON.stringify(data);
            }

            try {
                const response = await fetch(url, config);
                const result = await response.json();

                return {
                    ok: response.ok,
                    status: response.status,
                    data: result
                };
            } catch (error) {
                return {
                    ok: false,
                    error: error.message
                };
            }
        }

        function showResponse(elementId, response, isSuccess = null) {
            const element = document.getElementById(elementId);

            if (response.error) {
                element.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${response.error}`;
                element.className = 'response error';
                return;
            }

            if (isSuccess === null) {
                isSuccess = response.ok;
            }

            element.className = `response ${isSuccess ? 'success' : 'error'}`;
            element.innerHTML = `${isSuccess ? '‚úÖ' : '‚ùå'} –°—Ç–∞—Ç—É—Å: ${response.status}\n\n${JSON.stringify(response.data, null, 2)}`;
        }

        async function registerUser() {
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;

            if (!email || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            const response = await makeRequest('/auth/register', 'POST', { email, password });
            showResponse('register-response', response, response.ok);

            if (response.ok) {
                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.');
            }
        }

        async function verifyEmail() {
            const token = document.getElementById('verify-token').value;

            if (!token) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!');
                return;
            }

            const response = await makeRequest('/auth/verify-email', 'POST', { token });
            showResponse('verify-response', response, response.ok);

            if (response.ok) {
                alert('Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.');
            }
        }

        async function loginUser() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            const response = await makeRequest('/auth/login', 'POST', { email, password });
            showResponse('login-response', response, response.ok);

            if (response.ok && response.data.token) {
                jwtToken = response.data.token;
                localStorage.setItem('jwt_token', jwtToken);
                alert(`–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω! –ö—Ä–µ–¥–∏—Ç–æ–≤: ${response.data.user.credits}`);

                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–∫–µ–Ω–µ
                const tokenDisplay = document.createElement('div');
                tokenDisplay.className = 'response token-display';
                tokenDisplay.innerHTML = `üîë JWT –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω:\n${jwtToken.substring(0, 50)}...`;
                document.getElementById('login-response').appendChild(tokenDisplay);
            }
        }

        async function getProfile() {
            if (!jwtToken) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É!');
                return;
            }

            const response = await makeRequest('/auth/profile', 'GET', null, true);
            showResponse('profile-response', response, response.ok);
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–∫–µ–Ω–µ –≤ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (jwtToken) {
            const info = document.createElement('div');
            info.className = 'warning';
            info.innerHTML = '<strong>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> –£ –≤–∞—Å –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π JWT —Ç–æ–∫–µ–Ω. –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.';
            document.querySelector('.container').insertBefore(info, document.querySelector('.container').children[2]);
        }
    </script>
</body>
</html>
